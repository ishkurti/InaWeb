<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>sound atlas | cartomemorias</title>
  <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,700;1,400&family=Staatliches&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Barlow', sans-serif;
      margin: 40px;
      background-color: white;
      color: #000;
      font-size: 15px;
    }

    nav {
      position: absolute;
      top: 150px;
      left: 30px;
    }

    nav ul { list-style-type: none; padding: 0; }
    nav ul li { margin-bottom: 10px; }

    nav ul li a {
      text-decoration: none;
      font-family: 'Barlow', sans-serif;
      color: #0c6bd2;
      font-size: 18px;
      transition: background-color 0.3s, color 0.3s;
    }
    nav ul li a:hover {
      background-color: rgb(255, 250, 107);
      color: black;
      text-decoration: underline;
    }

    main { margin-left: 150px; padding: 20px; }

    h1 {
      font-family: 'Staatliches', sans-serif;
      font-weight: bold;
      font-size: 28px;
      color: #000;
      margin-top: 0;
      text-align: left;
    }

    img.logo {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 135px;
      height: auto;
      rotate: 40deg;
      transform-origin: center;
      animation: spin 20s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @media (min-width: 769px) {
      img.logo:hover { animation-play-state: paused; }
    }

    .clearfix {
      max-width: 600px;   /* your text column width */
      clear: both;
    }

    /* Top image row (keep as-is) */
    .image-row {
      display: flex;
      justify-content: space-between;
      gap: 15px;
      margin: 16px 0;
    }
    .image-row img {
      flex: 0 0 48%;  /* two images per row */
      max-width: 48%;
      height: auto;
      display: block;
    }

    /* Audio card */
    .audio-card {
      margin: 18px 0 28px;
      padding: 14px 16px;
      border: 1px solid #fdcbcb;
      border-radius: 12px;
      background: #fffbe6;
      max-width: 600px;
    }
    .audio-title {
      font-weight: 600;
      margin-bottom: 4px;
      line-height: 1.25;
      color: #000;
    }
    .audio-note { font-weight: 400; font-style: italic; color: #444; }
    .audio-meta {
      font-size: 14px;
      color: #444;
      font-style: italic;
      margin-bottom: 8px;
      line-height: 1.4;
    }
    .audio-card audio {
      width: 100%;
      display: block;
      margin-bottom: 6px;
    }

    @media (max-width: 768px) {
      .audio-meta { font-size: 13px; }
      .audio-card { max-width: 100%; padding: 12px 14px; }
    }

    /* hafize asllani hyperlink */
    p a { color: black; text-decoration: underline; }
    p a:hover { text-decoration: none; }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      body { margin: 20px; }
      nav {
        position: relative;
        top: 0;
        left: 0;
        text-align: center;
        margin-bottom: 20px;
      }
      nav ul { display: flex; justify-content: center; }
      nav ul li { margin: 0 10px; }
      main { margin-left: 0; padding: 10px; }
      img.logo {
        position: relative;
        display: block;
        margin: 0 auto 25px;
      }
      .clearfix { max-width: 100%; margin: 0 auto; }
      .image-row { flex-direction: column; }
      .image-row img { max-width: 100%; flex-basis: 100%; }
    }

    /* ---------------------------
       Subtle 5-image gallery + lightbox
       --------------------------- */
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 26px auto 8px;
      max-width: 620px; /* stays subtle and centered */
    }
    .gallery figure {
      margin: 0;
    }
    .gallery img {
      width: 120px;              /* small thumbnails = subtle */
      height: 90px;              /* consistent tile height */
      object-fit: cover;         /* crop to fit nicely */
      border-radius: 8px;
      opacity: 0.9;
      cursor: pointer;
      transition: transform 0.25s ease, opacity 0.25s ease;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }
    .gallery img:hover {
      transform: translateY(-2px) scale(1.03);
      opacity: 1;
    }

    .gallery-caption {
      text-align: center;
      font-size: 13px;
      color: #555;
      margin: 6px 0 2px;
      font-style: italic;
    }

    /* Lightbox modal */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
      z-index: 9999;
    }
    .lightbox.open { display: flex; }

    .lightbox-inner {
      position: relative;
      max-width: 92vw;
      max-height: 92vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .lightbox img {
      max-width: 90vw;
      max-height: 82vh;
      border-radius: 12px;
      box-shadow: 0 2px 20px rgba(0,0,0,0.35);
      display: block;
    }

    .lb-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: rgba(255,255,255,0.9);
      color: #0c6bd2;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
    }
    .lb-prev { left: -46px; }
    .lb-next { right: -46px; }

    .lb-close {
      position: absolute;
      top: -44px;
      right: -4px;
      border: none;
      background: rgba(255,255,255,0.95);
      color: #333;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 16px;
      cursor: pointer;
    }

    .lb-caption {
      position: absolute;
      bottom: -34px;
      left: 0;
      right: 0;
      text-align: center;
      color: #fff;
      font-size: 14px;
      line-height: 1.3;
      opacity: 0.9;
    }

    @media (max-width: 640px) {
      .gallery { max-width: 100%; gap: 8px; }
      .gallery img { width: 29vw; height: 22vw; } /* responsive grid-y size */
      .lb-prev { left: -36px; }
      .lb-next { right: -36px; }
    }
  </style>
</head>
<body>

  <a href="index.html">
    <img src="./images/compass6.png" alt="Logo" class="logo">
  </a>

  <nav>
    <ul>
      <li><a href="index.html">about</a></li>
      <li><a href="research.html">research</a></li>
      <li><a href="sound-atlas.html">sound atlas</a></li>
    </ul>
  </nav>

  <main>
    <section id="sound-atlas">
      <div class="clearfix">
        <h1>Atlas of Albanian Sound</h1>

        <!-- Top two images -->
        <div class="image-row">
          <img src="./images/sound2.png" alt="Sound Image 1" loading="lazy">
          <img src="./images/sound3.png" alt="Sound Image 2" loading="lazy">
        </div>

        <p>Started in 2023, the <em><strong>Atlas of Albanian Sound</strong></em> is an ongoing creative project that maps the entanglements of music, memory, and place during an often overlooked period: early 20th century Albania. The fall of the Ottoman Empire and the subsequent drawing of nation-state borders across the Balkans displaced and attempted to erase many communities, particularly Muslim, Roma, and Jewish groups. This project brings together the most comprehensive collection of 78 rpm recordings, discographic catalogs, and historical research to trace sonic geographies across Albania and its diasporas. It is an attempt to retrace the steps of these often cross-border and multiethnic communities by uncovering the music and the musicians who carried their stories through sound.</p>

        <p>Through collaborations with private collectors in the US and Greece, I am currently digitizing and remastering more than 300 songs originally recorded on shellac discs—from the first known recording of the Albanian language in 1906 to the haunting voice of <a href="https://www.youtube.com/watch?v=z8SRLunraPo" target="_blank">Hafize Asllani</a> in Leskovik, Labë iso-polyphonies, highland <em>çifteli</em> riffs, the marching-band anthems once performed for King Zog... and everything in between. I am also building a digital database that documents the songs, the musicians, and the communities behind them. The goal is to share these recordings through a freely accessible interactive archive, where sound, place, and history can be explored together.</p>

        <p>As a geographer, I am interested in how speaking and listening—or, the <em><strong>oral</strong></em> and the <strong><em>aural</em></strong>—can serve as cartographic method, and how this in turn can reveal connections, displacements, and resonances that remain invisible on conventional maps and archives. Through this work, I've come to understand sound and music as living, collective spaces of memory, and as invitations to reimagine how we chart and navigate our world(s).</p>
        <p>Can the map serve as archive?</p>
        <p>Can the archive serve as map?</p>
        <p>How does past resonate with present?</p>
        <p>Sound is the territory. Listening is the atlas.</p>

        <!-- AUDIO -->
        <div class="audio-card">
          <div class="audio-title">
            Valle Me Dy — Konitsa <span class="audio-note">(real name unknown)</span>
          </div>
          <div class="audio-meta">
            Recorded in Athens, 1947, on the Balkan label.<br>
            Courtesy of Christopher King. Transfer by Ina Shkurti.
          </div>

          <audio
            id="valleAudio"
            controls
            preload="metadata"
            controlsList="nodownload noplaybackrate noremoteplayback"
            oncontextmenu="return false"
          >
            Your browser does not support the audio element.
          </audio>
        </div>

        <p>* * *</p>
        <p><em>This project is a labor of love and has benefited greatly from the generosity of the collectors, folk musicians, elders, and scholars who have shared their knowledge and time with me.</em></p>
        <p><em>Interactive map archive coming soon.</em></p>

        <!-- Subtle 5-image thumbnail gallery -->
        <div class="gallery" id="gallery">
              <img src="./images/atlas1.jpg" alt="RCA Victor's Delvina Zeza Delvina." loading="lazy">
              <img src="./images/atlas2.jpg" alt="Building the database." loading="lazy">
              <img src="./images/atlas3.jpg" alt="Workstation. Konitsa." loading="lazy">
              <img src="./images/atlas4.jpg" alt="Postcard of Roma musicians from Durrës. Circa 1930(?)" loading="lazy">
              <img src="./images/atlas5.jpg" alt="Some light reading. Edward Capps, 1963." loading="lazy">
              <img src="./images/atlas6.jpg" alt="Faik Konitza's house. Konitsa village." loading="lazy">
              <img src="./images/atlas7.jpg" alt="A çamiko dance engraved on the entrance of Hamko's House." loading="lazy">
              <img src="./images/atlas8.jpg" alt="Cats of Konitsa. Do they speak Greek or Albanian?" loading="lazy">
              <img src="./images/atlas9.jpg" alt="Vjosa River Valley. Photo by Ina Shkurti." loading="lazy">
        </div>
        <div class="gallery-caption">Click any image to view larger</div>
      </div>
    </section>
  </main>

  <!-- Lightbox modal -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <div class="lightbox-inner">
      <button class="lb-btn lb-prev" id="lbPrev" aria-label="Previous image">‹</button>
      <img id="lbImg" alt="">
      <button class="lb-btn lb-next" id="lbNext" aria-label="Next image">›</button>
      <button class="lb-close" id="lbClose" aria-label="Close">Close ✕</button>
      <div class="lb-caption" id="lbCaption"></div>
    </div>
  </div>

  <!-- Scripts (place before </body>) -->
  <script>
    // Disable right-click on audio
    document.addEventListener('contextmenu', e => {
      if (e.target.closest('audio')) e.preventDefault();
    });

    // Mount audio securely (works best from a local server)
    (async function mountAudio() {
      const audio = document.getElementById('valleAudio');
      const srcPath = './audio/812-A.mp3';
      try {
        const res = await fetch(srcPath, { credentials: 'same-origin' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        audio.src = url;
        audio.load();
        window.addEventListener('beforeunload', () => URL.revokeObjectURL(url));
      } catch (err) {
        console.warn('Fetch failed, falling back:', err);
        audio.src = srcPath;
        audio.load();
      }
    })();

    // --------- Gallery Lightbox ---------
    (function initLightbox() {
      const gallery = document.getElementById('gallery');
      const items = Array.from(gallery.querySelectorAll('img'));
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lbImg');
      const lbCaption = document.getElementById('lbCaption');
      const prevBtn = document.getElementById('lbPrev');
      const nextBtn = document.getElementById('lbNext');
      const closeBtn = document.getElementById('lbClose');

      let index = 0;

      function open(i) {
        index = i;
        const img = items[index];
        lbImg.src = img.src;
        lbImg.alt = img.alt || '';
        lbCaption.textContent = img.dataset.caption || img.alt || '';
        lb.classList.add('open');
        lb.setAttribute('aria-hidden', 'false');
        // prevent page scroll when open
        document.body.style.overflow = 'hidden';
      }

      function close() {
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        // clear src to stop downloading a giant image again on reopen (optional)
        // lbImg.src = '';
      }

      function go(delta) {
        index = (index + delta + items.length) % items.length;
        const img = items[index];
        lbImg.src = img.src;
        lbImg.alt = img.alt || '';
        lbCaption.textContent = img.dataset.caption || img.alt || '';
      }

      // Click thumbs
      items.forEach((img, i) => {
        img.addEventListener('click', () => open(i));
      });

      // Buttons
      prevBtn.addEventListener('click', () => go(-1));
      nextBtn.addEventListener('click', () => go(1));
      closeBtn.addEventListener('click', close);

      // Close on backdrop click
      lb.addEventListener('click', (e) => {
        if (e.target === lb) close();
      });

      // Keyboard support
      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('open')) return;
        if (e.key === 'Escape') close();
        if (e.key === 'ArrowLeft') go(-1);
        if (e.key === 'ArrowRight') go(1);
      });

      // Simple swipe
      let startX = 0, down = false;
      lbImg.addEventListener('pointerdown', (e) => { down = true; startX = e.clientX; });
      lbImg.addEventListener('pointerup', (e) => {
        if (!down) return;
        const dx = e.clientX - startX;
        if (dx < -40) go(1);
        if (dx > 40) go(-1);
        down = false;
      });
      lbImg.addEventListener('pointercancel', () => { down = false; });
    })();
  </script>
</body>
</html>
